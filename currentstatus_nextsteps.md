# Hearth OS: Current Status and Next Steps

This document outlines the current status of the Hearth OS project, identifies the gaps between the current state and the desired end-state, and provides a high-level action plan to get the application fully functional on a Raspberry Pi.

## Current Status

The `hearth-os` project is a self-hosted, private family space with features for messaging, photos, and tasks. The backend is designed as a microservices architecture, orchestrated with Docker.

### Backend

*   **Services:** The backend consists of the following services:
    *   `postgres`: A PostgreSQL database to store all application data.
    *   `synapse`: A Matrix-based chat server for real-time messaging.
    *   `element`: A web-based client for Matrix.
    *   `intelligence`: A Python service that provides AI-powered features, such as natural language processing for commands and daily summaries.
*   **Orchestration:** The services are orchestrated using Docker Compose. The `docker-compose.yml` file defines the core services, and the `docker-compose.override.yml` file adds the `intelligence` service.
*   **Configuration:** The project is configured using a `.env` file, which is generated by the `install.sh` script.
*   **Database:** The database schema is defined in the `init-db.sql` file.

### Frontend

*   **Web:** The project uses the Element web client for messaging. This is a temporary solution until the mobile app is ready.
*   **Mobile:** There is currently no mobile app. This is the primary goal for the project.

### AI

*   **Ollama:** The `intelligence` service is designed to use the Ollama AI service for natural language processing. However, Ollama is not yet integrated into the Docker Compose setup.

## Gap Analysis

The following is a list of the gaps between the current state of the project and the desired end-state:

*   **Raspberry Pi Setup:** The `install.sh` script is designed to be run on a Raspberry Pi, but it has not been tested.
*   **Mobile App:** There is no mobile app for Hearth OS.
*   **Ollama Integration:** The Ollama service is not integrated into the Docker Compose setup.
*   **Photos and Tasks:** The `photos` and `tasks` services are currently empty placeholders.
*   **User Management:** There is no user management system beyond the basic registration provided by Synapse.
*   **UI/UX:** The user interface is currently the default Element web client, which is not customized for Hearth OS.

## Action Plan

The following is a sequential action plan to get the Hearth OS application fully functional on a Raspberry Pi. The plan is broken down into phases, with a clear order of operations.

### Phase 1: Backend Setup and Testing

The goal of this phase is to get the backend services up and running on your local machine. This will allow you to test the services and ensure that they are working correctly before deploying them to the Raspberry Pi.

1.  **Install Docker:** If you haven't already, install Docker Desktop on your local machine.
2.  **Run the `install.sh` script:** This script will generate the necessary configuration files, including the `.env` file.
3.  **Run Docker Compose:** Use the `docker-compose up` command to build and start the backend services.
4.  **Test the services:** Use the Element web client to connect to the Synapse server and send some messages. Verify that the messages are being stored in the database.

### Phase 2: Raspberry Pi Deployment

The goal of this phase is to deploy the backend services to a Raspberry Pi.

1.  **Prepare the Raspberry Pi:** Install a fresh copy of Raspberry Pi OS on your Raspberry Pi.
2.  **Install Docker:** Install Docker and Docker Compose on the Raspberry Pi.
3.  **Copy the project files:** Copy the `hearth-os` project files to the Raspberry Pi.
4.  **Run the `install.sh` script:** This script will generate the necessary configuration files.
5.  **Run Docker Compose:** Use the `docker-compose up` command to build and start the backend services.
6.  **Test the services:** Use the Element web client to connect to the Synapse server and send some messages. Verify that the messages are being stored in the database.

### Phase 3: Mobile App Development

The goal of this phase is to develop a mobile app for Hearth OS. This is the primary goal for the project.

1.  **Choose a framework:** Choose a cross-platform framework for the mobile app, such as React Native or Flutter.
2.  **Design the UI/UX:** Design a user-friendly interface for the mobile app.
3.  **Implement the messaging feature:** The mobile app should connect to the Synapse server for real-time messaging.
4.  **Implement the photos and tasks features:** The mobile app should connect to the `photos` and `tasks` services to provide these features.
5.  **Implement user management:** The mobile app should provide a way for users to register, log in, and manage their accounts.

### Phase 4: Service Implementation and Integration

The goal of this phase is to implement the `photos` and `tasks` services, and to integrate the Ollama service.

1.  **Implement the `photos` service:** This service should provide a way to upload, store, and view photos.
2.  **Implement the `tasks` service:** This service should provide a way to create, assign, and track tasks.
3.  **Integrate the Ollama service:** Add the Ollama service to the `docker-compose.yml` file and update the `intelligence` service to use it. This can be done at any point after Phase 1 is complete.

### Order of Operations

*   **Phases 1 and 2 must be completed in order.** You need to get the backend services running on your local machine before you can deploy them to the Raspberry Pi.
*   **Phase 3 can be started at any time after Phase 1 is complete.** You can start developing the mobile app as soon as the backend services are running on your local machine.
*   **Phase 4 can be started at any time after Phase 1 is complete.** You can implement the `photos` and `tasks` services and integrate the Ollama service at any time after the backend services are running on your local machine. However, it is recommended to complete Phase 2 first, so that you can test the services on the Raspberry Pi.
